!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=()=>{const e=document.createElement("button");return e.style.width="20px",e.style.height="20px",e.innerText="x",e.style.position="relative",e.style.bottom="30px",e.dataset.component="deleteFrame-button",e},a=()=>{const e=document.createElement("button");return e.style.width="20px",e.style.height="20px",e.innerText="c",e.style.position="relative",e.style.bottom="30px",e.style.left="58px",e.dataset.component="duplicateFrame-button",e},c=()=>{const e=document.createElement("canvas");return e.classList.add("canvas-mini"),e.classList.add("selected-canvas"),e.dataset.component="preview-canvas",e.setAttribute("width","100px"),e.setAttribute("height","100px"),e.style.border="1px solid #000000",e.style.background="#cccccc",e},i=()=>{const e=document.querySelector('[data-component="main-canvas"]');e.getContext("2d").clearRect(0,0,e.width,e.height)},r=()=>{const e=document.querySelector("[data-component=main-canvas]"),t=document.querySelector(".selected-canvas"),n=e.getContext("2d");n.imageSmoothingEnabled=!1,n.drawImage(t,0,0,t.clientWidth,t.clientHeight,0,0,e.clientWidth,e.clientHeight)},s=()=>{const e=document.querySelector('[data-component = "frame-section"]');if(null!=e.querySelector(".selected-canvas-container")){const t=e.querySelector(".selected-canvas-container");t.querySelector(".selected-canvas").classList.remove("selected-canvas"),t.classList.remove("selected-canvas-container")}},l=e=>{"canvas"===e.target.tagName.toLowerCase()&&(e.stopPropagation(),s(),(e=>{e.target.classList.add("selected-canvas"),e.target.parentNode.classList.add("selected-canvas-container")})(e),i(),r())},d=e=>{e.preventDefault(),s(),g(),i()},u=e=>{e.preventDefault();const t=e.target.parentNode;t.parentNode.removeChild(t)},m=e=>{(e=>{s();const t=e.target.closest("div"),n=t.querySelector("canvas"),o=h();t.parentNode.insertBefore(o,t.nextSibling);const a=document.querySelector(".selected-canvas");a.getContext("2d").drawImage(n,0,0,n.clientWidth,n.clientHeight,0,0,a.clientWidth,a.clientHeight),i(),r()})(e)},p=()=>{const e=document.querySelector('[data-component="frame-section"]'),t=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="add new frame",e.dataset.component="addFrame-button",e})();e.appendChild(t)},g=()=>{const e=document.querySelector('[data-component="frame-section"]'),t=document.createElement("div"),n=document.querySelector('[data-component="addFrame-button"]');t.dataset.component="frame-container",t.classList.add("preview-container"),t.classList.add("selected-canvas-container"),t.style.width="100px",t.style.height="100px",t.style.margin="1rem";const i=o();i.addEventListener("click",u);const r=a();r.addEventListener("click",m);const s=c();t.appendChild(s),t.appendChild(i),t.appendChild(r),e.insertBefore(t,n)},h=()=>{const e=document.createElement("div");e.dataset.component="frame-container",e.classList.add("preview-container"),e.classList.add("selected-canvas-container"),e.style.width="100px",e.style.height="100px",e.style.margin="1rem";const t=o();t.addEventListener("click",u);const n=a();n.addEventListener("click",m);const i=c();return e.appendChild(i),e.appendChild(t),e.appendChild(n),e},f=e=>{const t=document.querySelector('[data-component="main-frame-section"]'),n=(e=>{const t=document.createElement("canvas");return t.classList.add("main-canvas"),t.dataset.component="main-canvas",t.setAttribute("width",`${e}px`),t.setAttribute("height",`${e}px`),t.style.border="1px solid #000000",t.style.background="url('./Assets/maincanvas.png') repeat top left",t})(e),o=document.createElement("div");o.classList.add("main-canvas-container"),o.appendChild(n),t.appendChild(o)},v=()=>{const e=document.querySelector('[data-component="main-frame-section"]'),t=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="download this image",e.dataset.component="download-button",e})();t.style.marginTop="auto",e.appendChild(t)},y=()=>{const e=document.querySelector('[data-component="animation-section"]'),t=(()=>{const e=document.createElement("canvas");return e.classList.add("animated-canvas"),e.dataset.component="animated-canvas",e.setAttribute("width","100px"),e.setAttribute("height","100px"),e.style.border="1px solid #000000",e.style.background="#cccccc",e})(),n=document.createElement("div");n.classList.add("animated-canvas-container"),n.appendChild(t),e.appendChild(n)},b=()=>{const e=document.querySelector('[data-component="animation-section"]'),t=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="start",e.dataset.component="startAnimation-button",e})(),n=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="stop",e.dataset.component="stopAnimation-button",e})();e.appendChild(t),e.appendChild(n)},x=()=>{b(),(()=>{const e=document.querySelector('[data-component="animation-section"]'),t=document.createElement("input"),n=document.createElement("div");t.dataset.component="range-element",n.dataset.component="range-element-value",n.innerHTML="fps: 1",t.type="range",t.min="0",t.max="24",t.step="1",t.value="1",e.appendChild(t),e.appendChild(n)})()},S=e=>{e.preventDefault(),((e,t)=>{const n=document.querySelector("[data-component=main-frame-section]"),o="image/png",a=document.querySelector("[data-component=main-canvas]").toDataURL(o),c=document.createElement("a");c.download=t,c.href=a,c.dataset.downloadurl=[o,c.download,c.href].join(":"),n.appendChild(c),c.click(),n.removeChild(c)})()};let L;const q=e=>{const t=document.querySelectorAll('[data-component="preview-canvas"]'),n=document.querySelector('[data-component="animated-canvas"]');let o=[...t];const a=n.getContext("2d");let c=0;L=setInterval(function(){const e=document.querySelectorAll('[data-component="preview-canvas"]');e.length!==o.length&&(o=[...e],c=0,a.clearRect(0,0,n.width,n.height)),c===o.length-1?(a.clearRect(0,0,n.width,n.height),a.drawImage(o[c],0,0,o[c].clientWidth,o[c].clientHeight,0,0,n.clientWidth,n.clientHeight),c=0):(a.clearRect(0,0,n.width,n.height),a.drawImage(o[c],0,0,o[c].clientWidth,o[c].clientHeight,0,0,n.clientWidth,n.clientHeight),c+=1)},1e3/e)},E=()=>{clearInterval(L)},w=e=>{e.preventDefault();const t=document.querySelector('[data-component = "range-element"]').value;q(t)},D=e=>{e.preventDefault(),E()},z=e=>{const t=e.target.value;document.querySelector('[data-component = "range-element-value"]').innerHTML=`fps: ${t}`,E(),0===t?E():(E(),q(t))},k=()=>{document.querySelector('[data-component = "startAnimation-button"]').addEventListener("click",w),document.querySelector('[data-component="stopAnimation-button"]').addEventListener("click",D),document.querySelector('[data-component = "range-element"]').addEventListener("input",z)},C=e=>{e.preventDefault(),document.querySelector('[data-component="aside-settings-menu"]').display=""},T=e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector('[data-component="main-canvas"]'),n=t.getContext("2d"),o=t.clientWidth,a=document.querySelector('[data-component="frame-section"]').querySelector(".selected-canvas-container").querySelector(".selected-canvas"),c=a.getContext("2d");if(c.clearRect(0,0,a.clientWidth,a.clientHeight),"160"===e.currentTarget.value){if("320"==o){const e=n.getImageData(80,80,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","160"),t.setAttribute("height","160"),t.getContext("2d").putImageData(e,0,0)}if("640"==o){const e=n.getImageData(240,240,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","160"),t.setAttribute("height","160"),t.getContext("2d").putImageData(e,0,0)}}if("320"===e.currentTarget.value){if("160"==o){const e=n.getImageData(0,0,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","320"),t.setAttribute("height","320"),t.getContext("2d").putImageData(e,80,80)}if("640"==o){const e=n.getImageData(160,160,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","320"),t.setAttribute("height","320"),t.getContext("2d").putImageData(e,0,0)}}if("640"===e.currentTarget.value){if("160"==o){const e=n.getImageData(0,0,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","640"),t.setAttribute("height","640"),t.getContext("2d").putImageData(e,240,240)}if("320"==o){const e=n.getImageData(0,0,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","640"),t.setAttribute("height","640"),t.getContext("2d").putImageData(e,"160","160")}}c.drawImage(t,0,0,t.clientWidth,t.clientHeight,0,0,a.clientWidth,a.clientHeight)},A=()=>{const e=document.querySelector("[data-component=main-canvas]"),t=document.querySelector(".selected-canvas");t.getContext("2d").drawImage(e,0,0,e.clientWidth,e.clientHeight,0,0,t.clientWidth,t.clientHeight)},I=(e,t,n)=>{const o=e,a=t,c=document.querySelector("[data-component=main-canvas]"),i=c.getContext("2d"),r=i.getImageData(0,0,c.clientWidth,c.clientWidth),s=c.clientWidth,l=c.clientHeight,d=s;let u,m,p,g,h,f;const v=4,y=s*v,b=function(){const e=4*(a*s+o);return{r:r.data[e],g:r.data[e+1],b:r.data[e+2],a:r.data[e+3]||0}}(),x=[[e,t]];for(;x.length;){for(g=x.pop(),h=g[0],f=g[1],p=(f*s+h)*v;f>0&&q(p-y);)f-=1,p-=y;for(u=!0,m=!0;f<l&&q(p);)h<d&&S(),h>0&&L(),E(p),f+=1,p+=y;function S(){q(p+v)&&u?(x.push([h+1,f]),u=!1):q(p+v)||(u=!0)}function L(){q(p-v)&&m?(x.push([h-1,f]),m=!1):q(p-v)||(m=!0)}}function q(e){let t=r.data[e],n=r.data[e+1],o=r.data[e+2],a=r.data[e+3];return t===b.r&&n===b.g&&o===b.b&&a===b.a}function E(e){r.data[e]=n.r,r.data[e+1]=n.g,r.data[e+2]=n.b,r.data[e+3]=255}i.putImageData(r,0,0)},P=e=>{let t;return"#"==e[0]&&(t=e.substring(1).split("")),3==e.length&&(t=[e[0],e[0],e[1],e[1],e[2],e[2]]),{r:(t="0x"+t.join(""))>>16&255,g:t>>8&255,b:255&t,a:255}},M=(e,t,n)=>{const o=e,a=t,c=document.querySelector("[data-component=main-canvas]"),i=c.getContext("2d"),r=c.clientWidth,s=i.getImageData(0,0,r,r),l=function(){const e=4*(a*r+o);return{r:s.data[e],g:s.data[e+1],b:s.data[e+2],a:s.data[e+3]||0}}();function d(e){let t=s.data[e],n=s.data[e+1],o=s.data[e+2],a=s.data[e+3];return t===l.r&&n===l.g&&o===l.b&&a===l.a}!function(){for(let e=0;e<s.data.length;e+=4)d(e)&&(s.data[e]=n.r,s.data[e+1]=n.g,s.data[e+2]=n.b,s.data[e+3]=255)}(),i.putImageData(s,0,0)},W=(e,t,n,o)=>{const a=e,c=t,i=document.querySelector("[data-component=main-canvas]"),r=i.getContext("2d"),s=i.clientWidth,l=r.getImageData(0,0,s,s),d=4,u=[];function m(e,t){return(t*s+e)*d}!function(e,t){for(let n=e;n<e+5;n+=1)for(let e=t;e<t+5;e+=1)u.push(m(n,e))}(5*a,5*c),console.log(u),(a+c)%2==0&&function(){for(;u.length;){let e=u.pop();e%4==0&&(l.data[e]=n.r,l.data[e+1]=n.g,l.data[e+2]=n.b,l.data[e+3]=255)}}(),r.putImageData(l,0,0)},_=5,H={Pencil:"pencil",Line:"line",Bucket:"bucket",Erase:"erase",BucketSamePix:"bucket-same-pixels",Dithering:"dithering"},R={tool:H.Pencil,isMouseDown:!1,pixelSize:5,canvasUnits:128,color:"#000000"};function j(e){return R.tool===e}const B=()=>{const e=document.querySelector("[data-component=main-canvas]"),t=document.querySelector('[data-component="tools-section"]'),n=document.querySelector('[data-component="pixel-size-buttons"]'),o=document.querySelector('[data-component="color-picker"]'),a=document.querySelector('[data-component="main-frame-section"]');let c,i,r;function s(t){const n=e.getBoundingClientRect(),o=t.clientX-n.left,a=t.clientY-n.top,c=Math.min(o,R.canvasUnits*_),i=Math.min(a,R.canvasUnits*_);return{x:Math.floor(c/5),y:Math.floor(i/5)}}function l(e){const t=s(e);!function(e,t){R.isMouseDown&&(c.fillStyle=R.color,c.fillRect(e*_,t*_,R.pixelSize,R.pixelSize),c.moveTo(e*_,t*_),c.lineTo(e*_+R.pixelSize,t*_+R.pixelSize))}(t.x,t.y)}function d(e,t){c.strokeStyle=R.color,c.lineWidth=R.pixelSize;const n=Math.abs(i.x-e),o=Math.abs(i.y-t),a=e-i.x,r=t-i.y,s=n/o*_,l=o/n*_;let d,u=i.x*_,m=i.y*_;const p=n>o,g=a>0,h=r>0;if(!p&&g&&!h){d=n;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u,m-l),c.stroke(),u+=_,m-=l}if(p&&g&&!h){d=o;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u+s,m),c.stroke(),u+=s,m-=_}if(p&&g&&h){d=o;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u+s,m),c.stroke(),u+=s,m+=_}if(!p&&g&&h){d=n;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u,m+l),c.stroke(),u+=_,m+=l}if(!p&&!g&&h){d=n;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u,m+l),c.stroke(),u-=_,m+=l}if(p&&!g&&h){d=o;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u-s,m),c.stroke(),u-=s,m+=_}if(p&&!g&&!h){d=o;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u-s,m),c.stroke(),u-=s,m-=_}if(!p&&!g&&!h){d=n;for(let e=0;e<d;e+=1)c.beginPath(),c.moveTo(u,m),c.lineTo(u,m-l),c.stroke(),u-=_,m-=l}}function u(){c.putImageData(r,0,0)}function m(e){const t=s(e);!function(e,t){R.isMouseDown&&c.clearRect(e*_,t*_,R.pixelSize,R.pixelSize)}(t.x,t.y)}function p(e){!function(e){const{x:t,y:n}=s(e),o=t,a=n;document.querySelector('[data-component="statistic"]').innerHTML=`[ ${o}; ${a} ]`}(e),function(e){return R.tool===e}("pencil")&&l(e),j("line")&&function(e){if(R.isMouseDown){u();const t=s(e);d(t.x,t.y)}}(e),function(e){return R.tool===e}("bucket")&&"click"==e.type&&function(e){const t=s(e),n=5*t.x,o=5*t.y,a=P(R.color);I(n,o,a),A()}(e),function(e){return R.tool===e}("bucket-same-pixels")&&"click"==e.type&&function(e){const t=s(e),n=5*t.x,o=5*t.y,a=P(R.color);M(n,o,a),A()}(e),function(e){return R.tool===e}("erase")&&m(e),function(e){return R.tool===e}("dithering")&&function(e){const t=s(e),n=t.x,o=t.y,a=P(R.color),c=R.pixelSize;R.isMouseDown&&(W(n,o,a,c),A())}(e)}function g(e){if(j("line")){R.isMouseDown=!1,u();const t=s(e);d(t.x,t.y)}R.isMouseDown=!1,A()}t.addEventListener("click",function(e){const t=e.target.closest(".section_tools-button"),n=document.querySelectorAll(".section_tools-button");e.target.closest('[data-component = "pencil-button"]')&&(R.tool=H.Pencil,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "line-button"]')&&(R.tool=H.Line,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "paint-bucket-button"]')&&(R.tool=H.Bucket,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "paint-bucket-same-pix-button"]')&&(R.tool=H.BucketSamePix,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "erase-button"]')&&(R.tool=H.Erase,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "dithering-button"]')&&(R.tool=H.Dithering,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool"))}),n.addEventListener("click",function(e){const t=e.target.closest(".section_tools-button-small"),n=document.querySelectorAll(".current-size");e.target.closest('[data-component = "button_size1"]')&&(R.pixelSize=5,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size")),e.target.closest('[data-component = "button_size2"]')&&(R.pixelSize=10,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size")),e.target.closest('[data-component = "button_size3"]')&&(R.pixelSize=15,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size")),e.target.closest('[data-component = "button_size4"]')&&(R.pixelSize=20,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size"))}),e.addEventListener("mousedown",function(t){R.isMouseDown=!0,c=e.getContext("2d"),i=s(t),r=c.getImageData(0,0,e.width,e.height)}),e.addEventListener("mouseup",g),e.addEventListener("mousemove",p),a.addEventListener("mouseup",g),e.addEventListener("click",p),o.addEventListener("input",function(){const e=document.querySelector('[data-component="color-picker"]');R.color=e.value})},K=document.querySelector('[data-component = "pencil-button"]'),O=document.querySelector('[data-component = "line-button"]'),F=document.querySelector('[data-component = "erase-button"]'),N=document.querySelector('[data-component = "button_size1"]'),$=document.querySelector('[data-component = "button_size2"]'),U=document.querySelector('[data-component = "button_size3"]'),X=document.querySelector('[data-component = "button_size4"]'),Y=e=>{const t=document.querySelectorAll(".section_tools-button"),n=document.querySelectorAll(".current-size");"KeyP"===e.code&&(e.preventDefault(),t.forEach(e=>e.classList.remove("selected-tool")),R.tool=H.Pencil,K.classList.add("selected-tool")),"KeyL"===e.code&&(e.preventDefault(),t.forEach(e=>e.classList.remove("selected-tool")),R.tool=H.Line,O.classList.add("selected-tool")),"KeyE"===e.code&&(e.preventDefault(),t.forEach(e=>e.classList.remove("selected-tool")),R.tool=H.Erase,F.classList.add("selected-tool")),"Digit1"===e.code&&e.altKey&&(e.preventDefault(),R.pixelSize=5,n.forEach(e=>e.classList.remove("current-size")),N.classList.add("current-size")),"Digit2"===e.code&&e.altKey&&(e.preventDefault(),R.pixelSize=10,n.forEach(e=>e.classList.remove("current-size")),$.classList.add("current-size")),"Digit3"===e.code&&e.altKey&&(e.preventDefault(),R.pixelSize=15,n.forEach(e=>e.classList.remove("current-size")),U.classList.add("current-size")),"Digit4"===e.code&&e.altKey&&(R.pixelSize=20,n.forEach(e=>e.classList.remove("current-size")),X.classList.add("current-size"))};(()=>{document.querySelector('[data-component = "frame-section"]').addEventListener("click",l),p(),document.querySelector('[data-component = "addFrame-button"]').addEventListener("click",d),g(),f(160),y(),x(),k(),v(),document.querySelector('[data-component="download-button"]').addEventListener("click",S),document.querySelector('[data-component = "menu-button"]').addEventListener("click",C),document.querySelector('[data-component="aside-select-menu"]').addEventListener("change",T),document.addEventListener("keypress",Y)})(),B()}]);