!function(e){var t={};function n(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(o,c,function(t){return e[t]}.bind(null,c));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=()=>{const e=document.createElement("button");return e.style.width="20px",e.style.height="20px",e.innerText="x",e.style.position="relative",e.style.bottom="30px",e.dataset.component="deleteFrame-button",e},c=()=>{const e=document.createElement("button");return e.style.width="20px",e.style.height="20px",e.innerText="c",e.style.position="relative",e.style.bottom="30px",e.style.left="58px",e.dataset.component="duplicateFrame-button",e},a=()=>{const e=document.createElement("canvas");return e.classList.add("canvas-mini"),e.classList.add("selected-canvas"),e.dataset.component="preview-canvas",e.setAttribute("width","100px"),e.setAttribute("height","100px"),e.style.border="1px solid #000000",e.style.background="#cccccc",e},i=()=>{const e=document.querySelector('[data-component="main-canvas"]');e.getContext("2d").clearRect(0,0,e.width,e.height)},r=()=>{const e=document.querySelector("[data-component=main-canvas]"),t=document.querySelector(".selected-canvas"),n=e.getContext("2d");n.imageSmoothingEnabled=!1,n.drawImage(t,0,0,t.clientWidth,t.clientHeight,0,0,e.clientWidth,e.clientHeight)},s=()=>{const e=document.querySelector('[data-component = "frame-section"]');if(null!=e.querySelector(".selected-canvas-container")){const t=e.querySelector(".selected-canvas-container");t.querySelector(".selected-canvas").classList.remove("selected-canvas"),t.classList.remove("selected-canvas-container")}},l=e=>{"canvas"===e.target.tagName.toLowerCase()&&(e.stopPropagation(),s(),(e=>{e.target.classList.add("selected-canvas"),e.target.parentNode.classList.add("selected-canvas-container")})(e),i(),r())},d=e=>{e.preventDefault(),s(),h(),i()},u=e=>{e.preventDefault();const t=e.target.parentNode;t.parentNode.removeChild(t)},m=e=>{(e=>{s();const t=e.target.closest("div"),n=t.querySelector("canvas"),o=g();t.parentNode.insertBefore(o,t.nextSibling);const c=document.querySelector(".selected-canvas");c.getContext("2d").drawImage(n,0,0,n.clientWidth,n.clientHeight,0,0,c.clientWidth,c.clientHeight),i(),r()})(e)},p=()=>{const e=document.querySelector('[data-component="frame-section"]'),t=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="add new frame",e.dataset.component="addFrame-button",e})();e.appendChild(t)},h=()=>{const e=document.querySelector('[data-component="frame-section"]'),t=document.createElement("div"),n=document.querySelector('[data-component="addFrame-button"]');t.dataset.component="frame-container",t.classList.add("preview-container"),t.classList.add("selected-canvas-container"),t.style.width="100px",t.style.height="100px",t.style.margin="1rem";const i=o();i.addEventListener("click",u);const r=c();r.addEventListener("click",m);const s=a();t.appendChild(s),t.appendChild(i),t.appendChild(r),e.insertBefore(t,n)},g=()=>{const e=document.createElement("div");e.dataset.component="frame-container",e.classList.add("preview-container"),e.classList.add("selected-canvas-container"),e.style.width="100px",e.style.height="100px",e.style.margin="1rem";const t=o();t.addEventListener("click",u);const n=c();n.addEventListener("click",m);const i=a();return e.appendChild(i),e.appendChild(t),e.appendChild(n),e},v=e=>{const t=document.querySelector('[data-component="main-frame-section"]'),n=(e=>{const t=document.createElement("canvas");return t.classList.add("main-canvas"),t.dataset.component="main-canvas",t.setAttribute("width",`${e}px`),t.setAttribute("height",`${e}px`),t.style.border="1px solid #000000",t.style.background="#cccccc",t})(e),o=document.createElement("div");o.classList.add("main-canvas-container"),o.appendChild(n),t.appendChild(o)},f=()=>{const e=document.querySelector('[data-component="main-frame-section"]'),t=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="download this image",e.dataset.component="download-button",e})();t.style.marginTop="auto",e.appendChild(t)},y=()=>{const e=document.querySelector('[data-component="animation-section"]'),t=(()=>{const e=document.createElement("canvas");return e.classList.add("animated-canvas"),e.dataset.component="animated-canvas",e.setAttribute("width","100px"),e.setAttribute("height","100px"),e.style.border="1px solid #000000",e.style.background="#cccccc",e})(),n=document.createElement("div");n.classList.add("animated-canvas-container"),n.appendChild(t),e.appendChild(n)},b=()=>{const e=document.querySelector('[data-component="animation-section"]'),t=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="start",e.dataset.component="startAnimation-button",e})(),n=(()=>{const e=document.createElement("button");return e.style.width="100px",e.style.height="40px",e.innerText="stop",e.dataset.component="stopAnimation-button",e})();e.appendChild(t),e.appendChild(n)},x=()=>{b(),(()=>{const e=document.querySelector('[data-component="animation-section"]'),t=document.createElement("input"),n=document.createElement("div");t.dataset.component="range-element",n.dataset.component="range-element-value",n.innerHTML="fps: 1",t.type="range",t.min="0",t.max="24",t.step="1",t.value="1",e.appendChild(t),e.appendChild(n)})()},S=e=>{e.preventDefault(),((e,t)=>{const n=document.querySelector("[data-component=main-frame-section]"),o="image/png",c=document.querySelector("[data-component=main-canvas]").toDataURL(o),a=document.createElement("a");a.download=t,a.href=c,a.dataset.downloadurl=[o,a.download,a.href].join(":"),n.appendChild(a),a.click(),n.removeChild(a)})()};let L;const q=e=>{const t=document.querySelectorAll('[data-component="preview-canvas"]'),n=document.querySelector('[data-component="animated-canvas"]');let o=[...t];const c=n.getContext("2d");let a=0;L=setInterval(function(){const e=document.querySelectorAll('[data-component="preview-canvas"]');e.length!==o.length&&(o=[...e],a=0,c.clearRect(0,0,n.width,n.height)),a===o.length-1?(c.clearRect(0,0,n.width,n.height),c.drawImage(o[a],0,0,o[a].clientWidth,o[a].clientHeight,0,0,n.clientWidth,n.clientHeight),a=0):(c.clearRect(0,0,n.width,n.height),c.drawImage(o[a],0,0,o[a].clientWidth,o[a].clientHeight,0,0,n.clientWidth,n.clientHeight),a+=1)},1e3/e)},E=()=>{clearInterval(L)},w=e=>{e.preventDefault();const t=document.querySelector('[data-component = "range-element"]').value;q(t)},z=e=>{e.preventDefault(),E()},D=e=>{const t=e.target.value;document.querySelector('[data-component = "range-element-value"]').innerHTML=`fps: ${t}`,E(),0===t?E():(E(),q(t))},C=()=>{document.querySelector('[data-component = "startAnimation-button"]').addEventListener("click",w),document.querySelector('[data-component="stopAnimation-button"]').addEventListener("click",z),document.querySelector('[data-component = "range-element"]').addEventListener("input",D)},k=e=>{e.preventDefault(),document.querySelector('[data-component="aside-settings-menu"]').display=""},T=e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector('[data-component="main-canvas"]'),n=t.getContext("2d"),o=t.clientWidth,c=document.querySelector('[data-component="frame-section"]').querySelector(".selected-canvas-container").querySelector(".selected-canvas"),a=c.getContext("2d");if(a.clearRect(0,0,c.clientWidth,c.clientHeight),"160"===e.currentTarget.value){if("320"==o){const e=n.getImageData(80,80,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","160"),t.setAttribute("height","160"),t.getContext("2d").putImageData(e,0,0)}if("640"==o){const e=n.getImageData(240,240,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","160"),t.setAttribute("height","160"),t.getContext("2d").putImageData(e,0,0)}}if("320"===e.currentTarget.value){if("160"==o){const e=n.getImageData(0,0,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","320"),t.setAttribute("height","320"),t.getContext("2d").putImageData(e,80,80)}if("640"==o){const e=n.getImageData(160,160,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","320"),t.setAttribute("height","320"),t.getContext("2d").putImageData(e,0,0)}}if("640"===e.currentTarget.value){if("160"==o){const e=n.getImageData(0,0,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","640"),t.setAttribute("height","640"),t.getContext("2d").putImageData(e,240,240)}if("320"==o){const e=n.getImageData(0,0,o,o);n.clearRect(0,0,o,o),t.setAttribute("width","640"),t.setAttribute("height","640"),t.getContext("2d").putImageData(e,"160","160")}}a.drawImage(t,0,0,t.clientWidth,t.clientHeight,0,0,c.clientWidth,c.clientHeight)},A=()=>{const e=document.querySelector("[data-component=main-canvas]"),t=document.querySelector(".selected-canvas");t.getContext("2d").drawImage(e,0,0,e.clientWidth,e.clientHeight,0,0,t.clientWidth,t.clientHeight)},I=()=>{},M={Pencil:"pencil",Line:"line",Bucket:"bucket",Erase:"erase"},P={tool:M.Pencil,isMouseDown:!1,pixelSize:5,canvasUnits:128,color:"#000000"};function _(e){return P.tool===e}const H=()=>{const e=document.querySelector("[data-component=main-canvas]"),t=document.querySelector('[data-component="tools-section"]'),n=document.querySelector('[data-component="pixel-size-buttons"]'),o=document.querySelector('[data-component="color-picker"]'),c=document.querySelector('[data-component="main-frame-section"]');let a,i,r;function s(t){const n=e.getBoundingClientRect(),o=t.clientX-n.left,c=t.clientY-n.top,a=Math.min(o,5*P.canvasUnits),i=Math.min(c,5*P.canvasUnits);return{x:Math.floor(a/5),y:Math.floor(i/5)}}function l(e){const t=s(e);!function(e,t){P.isMouseDown&&(a.fillStyle=P.color,a.fillRect(5*e,5*t,P.pixelSize,P.pixelSize),a.moveTo(5*e,5*t),a.lineTo(5*e+P.pixelSize,5*t+P.pixelSize))}(t.x,t.y)}function d(e,t){a.strokeStyle=P.color,a.lineWidth=P.pixelSize;const n=Math.abs(i.x-e),o=Math.abs(i.y-t),c=e-i.x,r=t-i.y,s=n/o*5,l=o/n*5;let d,u=5*i.x,m=5*i.y;const p=n>o,h=c>0,g=r>0;if(!p&&h&&!g){d=n;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u,m-l),a.stroke(),u+=5,m-=l}if(p&&h&&!g){d=o;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u+s,m),a.stroke(),u+=s,m-=5}if(p&&h&&g){d=o;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u+s,m),a.stroke(),u+=s,m+=5}if(!p&&h&&g){d=n;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u,m+l),a.stroke(),u+=5,m+=l}if(!p&&!h&&g){d=n;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u,m+l),a.stroke(),u-=5,m+=l}if(p&&!h&&g){d=o;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u-s,m),a.stroke(),u-=s,m+=5}if(p&&!h&&!g){d=o;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u-s,m),a.stroke(),u-=s,m-=5}if(!p&&!h&&!g){d=n;for(let e=0;e<d;e+=1)a.beginPath(),a.moveTo(u,m),a.lineTo(u,m-l),a.stroke(),u-=5,m-=l}}function u(){a.putImageData(r,0,0)}function m(e){const t=s(e);!function(e,t){P.isMouseDown&&a.clearRect(5*e,5*t,P.pixelSize,P.pixelSize)}(t.x,t.y)}function p(e){!function(e){const t=s(e),n=t.x,o=t.y;document.querySelector('[data-component="statistic"]').innerHTML=`[ ${n}; ${o} ]`}(e),function(e){return P.tool===e}("pencil")&&l(e),_("line")&&function(e){if(P.isMouseDown){u();const t=s(e);d(t.x,t.y)}}(e),function(e){return P.tool===e}("bucket")&&function(e){const t=s(e),n=t.x,o=t.y;I(n,o)}(e),function(e){return P.tool===e}("erase")&&m(e)}function h(e){if(_("line")){P.isMouseDown=!1,u();const t=s(e);d(t.x,t.y)}P.isMouseDown=!1,A()}t.addEventListener("click",function(e){const t=e.target.closest(".section_tools-button"),n=document.querySelectorAll(".section_tools-button");e.target.closest('[data-component = "pencil-button"]')&&(P.tool=M.Pencil,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "line-button"]')&&(P.tool=M.Line,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool")),e.target.closest('[data-component = "paint-bucket-button"]')&&(P.tool=M.Bucket,alert("Sorry, tool is not available")),e.target.closest('[data-component = "erase-button"]')&&(P.tool=M.Erase,n.forEach(e=>e.classList.remove("selected-tool")),t.classList.add("selected-tool"))}),n.addEventListener("click",function(e){const t=e.target.closest(".section_tools-button-small"),n=document.querySelectorAll(".current-size");e.target.closest('[data-component = "button_size1"]')&&(P.pixelSize=5,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size")),e.target.closest('[data-component = "button_size2"]')&&(P.pixelSize=10,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size")),e.target.closest('[data-component = "button_size3"]')&&(P.pixelSize=15,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size")),e.target.closest('[data-component = "button_size4"]')&&(P.pixelSize=20,n.forEach(e=>e.classList.remove("current-size")),t.classList.add("current-size"))}),e.addEventListener("mousedown",function(t){P.isMouseDown=!0,a=e.getContext("2d"),i=s(t),r=a.getImageData(0,0,e.width,e.height)}),e.addEventListener("mouseup",h),e.addEventListener("mousemove",p),c.addEventListener("mouseup",h),e.addEventListener("click",p),o.addEventListener("input",function(){const e=document.querySelector('[data-component="color-picker"]');P.color=e.value})},R=document.querySelector('[data-component = "pencil-button"]'),W=document.querySelector('[data-component = "line-button"]'),j=document.querySelector('[data-component = "erase-button"]'),K=document.querySelector('[data-component = "button_size1"]'),O=document.querySelector('[data-component = "button_size2"]'),B=document.querySelector('[data-component = "button_size3"]'),F=document.querySelector('[data-component = "button_size4"]'),N=e=>{const t=document.querySelectorAll(".section_tools-button"),n=document.querySelectorAll(".current-size");"KeyP"===e.code&&(e.preventDefault(),t.forEach(e=>e.classList.remove("selected-tool")),P.tool=M.Pencil,R.classList.add("selected-tool")),"KeyL"===e.code&&(e.preventDefault(),t.forEach(e=>e.classList.remove("selected-tool")),P.tool=M.Line,W.classList.add("selected-tool")),"KeyE"===e.code&&(e.preventDefault(),t.forEach(e=>e.classList.remove("selected-tool")),P.tool=M.Erase,j.classList.add("selected-tool")),"Digit1"===e.code&&e.altKey&&(e.preventDefault(),P.pixelSize=5,n.forEach(e=>e.classList.remove("current-size")),K.classList.add("current-size")),"Digit2"===e.code&&e.altKey&&(e.preventDefault(),P.pixelSize=10,n.forEach(e=>e.classList.remove("current-size")),O.classList.add("current-size")),"Digit3"===e.code&&e.altKey&&(e.preventDefault(),P.pixelSize=15,n.forEach(e=>e.classList.remove("current-size")),B.classList.add("current-size")),"Digit4"===e.code&&e.altKey&&(P.pixelSize=20,n.forEach(e=>e.classList.remove("current-size")),F.classList.add("current-size"))};(()=>{document.querySelector('[data-component = "frame-section"]').addEventListener("click",l),p(),document.querySelector('[data-component = "addFrame-button"]').addEventListener("click",d),h(),v(160),y(),x(),C(),f(),document.querySelector('[data-component="download-button"]').addEventListener("click",S),document.querySelector('[data-component = "menu-button"]').addEventListener("click",k),document.querySelector('[data-component="aside-select-menu"]').addEventListener("change",T),document.addEventListener("keypress",N)})(),H()}]);